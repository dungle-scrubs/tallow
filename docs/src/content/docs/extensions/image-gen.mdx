---
title: image-gen
description: "Unified image generation tool — auto-routes across OpenAI, Google, xAI, BFL, and Fal via Vercel AI SDK"
---

Generates images from text prompts using the best available
provider. Supports OpenAI (gpt-image-1), Google (Gemini image,
Imagen 4), xAI (Grok), Black Forest Labs (Flux), and Fal.

## How it works

The agent calls `generate_image` with a text prompt. The
extension selects the best available provider based on:

1. **Capability requirements** — text rendering, reference
   images, inpainting
2. **API key availability** — only providers with configured
   keys are considered
3. **Quality/cost preference** — eco, balanced, or premium

Two invocation paths are supported transparently:

- **Dedicated image APIs** — `generateImage()` from Vercel AI
  SDK (OpenAI, Google Imagen, xAI, BFL, Fal)
- **Hybrid LLMs** — `generateText()` with image output
  (Gemini 2.5 Flash Image)

Generated images are saved to `~/.tallow/images/` and file
paths are returned to the LLM.

## Setup

Set at least one provider API key in `~/.tallow/.env`:

```bash
# OpenAI (gpt-image-1)
OPENAI_API_KEY=sk-...

# Google (Gemini image, Imagen 4)
GOOGLE_GENERATIVE_AI_API_KEY=...

# xAI (Grok image)
XAI_API_KEY=...

# Black Forest Labs (Flux models)
BFL_API_KEY=...

# Fal (Flux, Stable Diffusion)
FAL_KEY=...
```

Multiple keys can be set — the selector picks the best
available provider for each request.

## Supported models

| Provider | Model | Quality | Text render | Ref images |
|----------|-------|---------|-------------|------------|
| OpenAI | gpt-image-1 | ★★★ | ✓ | ✓ |
| Google | gemini-2.5-flash-image | ★★★★ | ✓ | ✓ |
| Google | imagen-4.0 | ★★★ | ✓ | ✗ |
| Google | imagen-ultra-4.0 | ★★★★ | ✓ | ✗ |
| xAI | grok-imagine | ★★★★ | ✗ | ✗ |
| BFL | flux-kontext-max | ★★★★ | ✗ | ✓ |
| BFL | flux-kontext-pro | ★★★★ | ✗ | ✓ |
| BFL | flux-pro-1.1-ultra | ★★★★ | ✗ | ✗ |
| Fal | fal-flux-dev | ★★★ | ✗ | ✗ |
| Fal | fal-flux-schnell | ★★ | ✗ | ✗ |

## Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `prompt` | string | Text description of the image |
| `aspectRatio` | string | `1:1`, `16:9`, `9:16`, `4:3`, `3:4`, `3:2`, `2:3` |
| `size` | string | Pixel size (e.g., `1024x1024`). Alternative to aspectRatio |
| `quality` | string | `low`, `medium`, `high`, `auto` |
| `n` | number | Number of images (1–4) |
| `provider` | string | Force a provider: `openai`, `google`, `xai`, `bfl`, `fal` |
| `model` | string | Force a model: `gpt-image-1`, `imagen-4.0`, etc. |
| `referenceImage` | string | Path to reference image for editing |
| `seed` | number | Seed for reproducibility |

## Auto-selection

When no provider or model is specified, the selector:

1. Filters by capability requirements
2. Filters by API key availability
3. Sorts by quality rating (from Arena leaderboard)
4. Applies cost preference:
   - **eco** → cheapest viable model
   - **balanced** → good quality, reasonable cost (default)
   - **premium** → highest quality available

## Dependencies

Uses the [Vercel AI SDK](https://ai-sdk.dev/) (`ai` package)
with provider adapters for each service.
