---
title: context-usage
description: Visualize context window usage with a waffle chart breakdown.
---

The **context-usage** extension adds a `/context` command that
visualizes how your context window is being used with a waffle
chart and per-category token breakdown.

## Usage

```
/context
```

## Categories shown

| Category | What it measures |
|----------|-----------------|
| System prompt | Base instructions |
| System tools | Tool definitions |
| Context files | AGENTS.md, CLAUDE.md |
| Skills | Available skill metadata in prompt |
| Messages | Conversation history |
| Free space | Remaining capacity |
| Autocompact buffer | Reserved for compaction (when enabled) |

The waffle chart gives an at-a-glance view of how much context
budget each category consumes, helping you identify when the
conversation is getting large or when context files are taking
too much space.

## Historical tool-result memory section

`/context` also shows a **Historical tool-result payloads** block with:

- total tool results in the active branch
- how many were summarized by retention
- retained bytes currently held in memory
- reclaimed bytes from summarized historical results

This helps verify that long-session payload retention is reducing memory pressure.

## Retention settings

Configure retention in `~/.tallow/settings.json` (or project `.tallow/settings.json`):

```json
{
  "toolResultRetention": {
    "enabled": true,
    "keepRecentToolResults": 12,
    "maxRetainedBytesPerResult": 49152,
    "previewChars": 600
  }
}
```

Semantics:

- `keepRecentToolResults`: newest N tool results kept full
- `maxRetainedBytesPerResult`: older results above this size are summarized
- `previewChars`: max preview size kept in summarized content
